webpackJsonp([35],{107:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"mypoints"},[i("a",{attrs:{href:"javascript:;"}},[i("i",{staticClass:"shopIcon iconPoints"}),i("span",[t._v(t._s(t.points))]),t._v("塑豆")]),t._v(" "),i("router-link",{staticStyle:{color:"#ff5000"},attrs:{to:{name:"recharge"}}},[i("i",{staticClass:"shopIcon iconRecord"}),t._v("充值塑豆")]),t._v(" "),i("router-link",{staticStyle:{color:"#ff5000"},attrs:{to:{name:"pointsrule"}}},[i("i",{staticClass:"shopIcon iconIntro"}),t._v("如何赚塑豆")])],1),t._v(" "),i("div",{staticClass:"pointsWrap"},[i("div",{staticClass:"pointsTitle"},[t._v("商品信息")]),t._v(" "),i("ul",{attrs:{id:"productUl"}},[i("li",[i("div",{staticStyle:{overflow:"hidden",padding:"10px",position:"relative"}},[i("img",{staticStyle:{margin:"0 10px 0 0"},attrs:{src:t.p1.thumb}}),t._v(" "),i("div",{staticClass:"proTxt"},[t._v(t._s(t.p1.name)),i("br"),t._v("所需塑豆"),i("span",[t._v(t._s(t.p1.points))]),t._v("塑豆")]),t._v(" "),i("div",{staticClass:"proAmount"},[t._v("x"+t._s(t.pro.num))])]),t._v(" "),i("div",{staticClass:"productNum"},[i("span",[t._v("*")]),t._v("请选择兑换数量：\n\t\t\t\t"),i("div",{staticClass:"proSelect"},[i("strong",{on:{click:t.proMin}},[t._v("-")]),t._v(" "),i("strong",[t._v(t._s(t.pro.num))]),t._v(" "),i("strong",{on:{click:t.proAdd}},[t._v("+")])])]),t._v(" "),i("div",{staticClass:"productCost"},[t._v("共"),i("span",[t._v(t._s(t.pro.num))]),t._v("件\n\t\t\t\t"),i("div",{staticClass:"exchange",on:{click:t.proExchange}},[t._v("提交兑换")]),t._v(" "),i("div",{staticClass:"cost"},[t._v("总塑豆："+t._s(t.pro.cost))])])]),t._v(" "),i("li",[i("div",{staticStyle:{overflow:"hidden",padding:"10px",position:"relative"}},[i("img",{staticStyle:{margin:"0 10px 0 0"},attrs:{src:t.p2.thumb}}),t._v(" "),i("div",{staticClass:"proTxt"},[t._v(t._s(t.p2.name)),i("br"),t._v("所需塑豆"),i("span",[t._v(t._s(t.p2.points))]),t._v("塑豆")]),t._v(" "),i("div",{staticClass:"proAmount"},[t._v("x"+t._s(t.pro2.num))])]),t._v(" "),i("div",{staticClass:"productNum"},[i("span",[t._v("*")]),t._v("请选择兑换数量：\n\t\t\t\t"),i("div",{staticClass:"proSelect"},[i("strong",{on:{click:t.proMin2}},[t._v("-")]),t._v(" "),i("strong",[t._v(t._s(t.pro2.num))]),t._v(" "),i("strong",{on:{click:t.proAdd2}},[t._v("+")])])]),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"proMsgLi"},t._l(t.p2.myMsg,function(o){return i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"radio",name:"msg"},domProps:{value:o.id,checked:t._q(t.selected,o.id)},on:{__c:function(i){t.selected=o.id}}}),t._v("\n\t\t\t\t\t"+t._s(o.input_time)),i("br"),t._v("\n\t\t\t\t\t供求："),i("span",[t._v(t._s(o.contents))])])})),t._v(" "),i("div",{staticClass:"productCost"},[t._v("共"),i("span",[t._v(t._s(t.pro2.num))]),t._v("件\n\t\t\t\t"),i("div",{staticClass:"exchange",on:{click:t.proExchange2}},[t._v("提交兑换")]),t._v(" "),i("div",{staticClass:"cost"},[t._v("总塑豆："+t._s(t.pro2.cost))])])])])])])},staticRenderFns:[function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("header",{attrs:{id:"bigCustomerHeader"}},[i("a",{staticClass:"back",attrs:{href:"javascript:window.history.back();"}}),t._v("\n\t塑豆商城\n")])},function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"shopBanner"},[i("img",{attrs:{width:"100%",src:"http://statics.myplas.com/myapp/img/shopBanner.jpg"}})])},function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"productMsg"},[i("span",[t._v("*")]),t._v("请选择要置顶的供求信息（限选一条）：\n\t\t\t")])}]}},20:function(t,o,i){var n=i(46)(i(77),i(107),null,null);t.exports=n.exports},46:function(t,o){t.exports=function(t,o,i,n){var e,s=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(e=t,s=t.default);var a="function"==typeof s?s.options:s;if(o&&(a.render=o.render,a.staticRenderFns=o.staticRenderFns),i&&(a._scopeId=i),n){var c=Object.create(a.computed||null);Object.keys(n).forEach(function(t){var o=n[t];c[t]=function(){return o}}),a.computed=c}return{esModule:e,exports:s,options:a}}},77:function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={data:function(){return{p1:"",p2:"",points:0,pro:{id:"",cost:100,num:1,price:0},pro2:{id:"",cost:100,num:1,price:0},selected:""}},methods:{proAdd:function(){this.pro.num++,this.pro.cost=this.pro.num*this.pro.price},proMin:function(){if(this.pro.num<2)return!1;this.pro.num--,this.pro.cost=this.pro.num*this.pro.price},proExchange:function(){var t=this;$.ajax({type:"post",url:"/api/qapi1_2/new_exchangeSupplyOrDemand",data:{token:window.localStorage.getItem("token"),goods_id:t.pro.id,num:t.pro.num,pur_id:""},dataType:"JSON"}).then(function(o){0==o.err?($.ajax({type:"post",url:"/api/score/decScore",data:{token:window.localStorage.getItem("token"),type:1,points:t.pro.cost,gid:t.pro.id},dataType:"JSON"}).then(function(t){},function(){}),weui.alert("兑换成功",{title:"塑料圈通讯录",buttons:[{label:"确定",type:"parimary",onClick:function(){window.location.reload()}}]})):weui.alert(o.msg,{title:"塑料圈通讯录",buttons:[{label:"确定",type:"parimary",onClick:function(){}}]})},function(){})},proAdd2:function(){this.pro2.num++,this.pro2.cost=this.pro2.num*this.pro2.price},proMin2:function(){if(this.pro2.num<2)return!1;this.pro2.num--,this.pro2.cost=this.pro2.num*this.pro2.price},proExchange2:function(){var t=this;$.ajax({type:"post",url:"/api/qapi1_2/new_exchangeSupplyOrDemand",data:{token:window.localStorage.getItem("token"),goods_id:t.pro2.id,num:t.pro2.num,pur_id:t.selected},dataType:"JSON"}).then(function(o){0==o.err?($.ajax({type:"post",url:"/api/score/decScore",data:{token:window.localStorage.getItem("token"),type:1,points:t.pro.cost,gid:t.pro2.id},dataType:"JSON"}).then(function(t){},function(){}),weui.alert("兑换成功",{title:"塑料圈通讯录",buttons:[{label:"确定",type:"parimary",onClick:function(){window.location.reload()}}]})):weui.alert(o.msg,{title:"塑料圈通讯录",buttons:[{label:"确定",type:"parimary",onClick:function(){}}]})},function(){})}},beforeRouteEnter:function(t,o,i){i(function(t){}),document.title="塑料圈通讯录"},activated:function(){var t=this;window.scrollTo(0,0);try{Piwik.getTracker("http://wa.myplas.com/piwik.php",2).trackPageView()}catch(t){}$.ajax({type:"post",url:"/api/qapi1_2/getProductList",data:{token:window.localStorage.getItem("token"),page:1,size:10},dataType:"JSON"}).then(function(o){1==o.err?weui.alert(o.msg,{title:"塑料圈通讯录",buttons:[{label:"确定",type:"parimary",onClick:function(){t.$router.push({name:"login"})}}]}):(t.p1=o.info[0],t.p2=o.info[1],t.pro.price=o.info[0].points,t.pro2.price=o.info[1].points,t.pro.id=o.info[0].id,t.pro2.id=o.info[1].id,t.points=o.pointsAll)},function(){})}}}});