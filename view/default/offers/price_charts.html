{layout file="public:main_layout"}
{insert_css files='home/mailloffer.css'}
<div class="mall-offer w1220">
    <div id="info" style="width: 100%;height:20px;"></div>
    <div id="main" style="width: 100%;height:600px;"></div>
</div>
<script type="text/javascript" src="__JS__/echarts.js"></script>
<script>
    var valid = '{$valid}';
    if(valid == 'false')
    {
        $("#info").text("本产品无数据记录");
    }
    var myChart = echarts.init(document.getElementById('main'));

    //app.title = '2015 年上证指数';

    var option = {
        title: {
            text: '{$type.model}价格走势图',
            textStyle:{color:'#fff'}
        },
        backgroundColor: '#21202D',
        legend: {
            data: ['价格范围', '销量'],
            inactiveColor: '#fff',
            textStyle: {
                color: '#fff'
            }
        },
        grid: [{
            show:true,
            left: 50,
            right: 50,
            backgroundColor: 'rgba(0.6, 0.6, 0.6, 0.6)',
            height: '50%'
        }, {
            left: 50,
            right: 50,
            top: '70%',
            height: '15%'
        }],
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                animation: false,
                lineStyle: {
                    color: '#376df4',
                    width: 2,
                    opacity: 1
                }
            }
        },
        xAxis: [{
            type: 'category',
            data: JSON.parse('{$x_ray}'),
            axisLine: {lineStyle: {color: 'red', width: 2}},
            axisLabel:{textStyle:{color:'#fff'}},
            nameTextStyle:{color:'#fff'},
            splitLine: {
                show: true,
                lineStyle: {
                    // 使用深浅的间隔色
                    color: ['red']
                }
            }
        }, {
            gridIndex: 1,
            type: 'category',
            data: JSON.parse('{$x_ray}'),
            axisLine: {lineStyle: {color: 'red', width: 2}},
            axisLabel:{textStyle:{color:'#fff'}},
            nameTextStyle:{color:'#fff'},
            splitLine: {
                show: true,
                lineStyle: {
                    // 使用深浅的间隔色
                    color: ['red']
                }
            }
        }],
        yAxis: [
            {
                type: 'value',
                name: '价格(千元)',
                min: {$price_col.bottom},
                max: {$price_col.top},
                interval: {$price_col.interval},
                scale: true,
                axisLine: {
                    lineStyle: {color: 'red', width: 2},
                    formatter: '{value} 千元'
                },
                axisLabel:{textStyle:{color:'#fff'}},
                nameTextStyle:{color:'#fff'},
                splitLine: {
                    show: true,
                    lineStyle: {
                        // 使用深浅的间隔色
                        color: ['red']
                    }
                }
            }, {
                type: 'value',
                name: '价格(千元)',
                min: {$price_col.bottom},
                max: {$price_col.top},
                interval: {$price_col.interval},
                scale: true,
                axisLine: {
                    lineStyle: {color: 'red', width: 2},
                },
                axisLabel:{textStyle:{color:'#fff'}},
                nameTextStyle:{color:'#fff'},
                splitLine: {
                    show: true,
                    lineStyle: {
                        // 使用深浅的间隔色
                        color: ['red']
                    }
                }
            }, {
                gridIndex: 1,
                type: 'value',
                name: '销量(吨)',
                min: 0,
                max: {$num_col.top},
                interval: {$num_col.interval},
                axisLabel:{textStyle:{color:'#fff'}},
                nameTextStyle:{color:'#fff'},
                axisLine: {
                    lineStyle: {color: 'red', width: 2},
                    formatter: '{value} 吨'
                },
                splitLine: {
                    show: true,
                    lineStyle: {
                        // 使用深浅的间隔色
                        color: ['red']
                    }
                }
            }, {
                gridIndex: 1,
                type: 'value',
                name: '销量(吨)',
                min: 0,
                max: {$num_col.top},
                interval: {$num_col.interval},
                scale: true,
                axisLabel:{textStyle:{color:'#fff'}},
                nameTextStyle:{color:'#fff'},
                axisLine: {
                    lineStyle: {color: 'red', width: 2},
                },
                splitLine: {
                    show: true,
                    lineStyle: {
                        // 使用深浅的间隔色
                        color: ['red']
                    }
                }
            }
        ],
        dataZoom: [{
            show: true,
            xAxisIndex: [0, 1],
            textStyle: {
                color: '#8392A5'
            },
            handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
            handleSize: '80%',
            dataBackground: {
                areaStyle: {
                    color: '#8392A5'
                },
                lineStyle: {
                    opacity: 0.8,
                    color: '#8392A5'
                }
            },
            handleStyle: {
                color: '#fff',
                shadowBlur: 3,
                shadowColor: 'rgba(0, 0, 0, 0.6)',
                shadowOffsetX: 2,
                shadowOffsetY: 2
            }
        }, {
            type: 'inside',
            xAxisIndex: [0, 1],
        }
        ],
        animation: false,
        series: [
            {
                type: 'candlestick',
                name: '价格范围',
                data: JSON.parse('{$price}'),
                itemStyle: {
                    normal: {
                        color: '#FD1050',
                        color0: '#0CF49B',
                        borderColor: '#FD1050',
                        borderColor0: '#0CF49B'
                    }
                }
            },{
                xAxisIndex: 1,
                yAxisIndex: 2,
                name: '销量',
                type: 'bar',
                data: JSON.parse('{$num}'),
                itemStyle: {
                    normal: {color: '#fc6621'},
                    emphasis: {color: 'red'}
                }
            }/*,
             {
             name: '销量',
             type: 'line',
             data: JSON.parse('{$num}'),
             smooth: false,
             yAxisIndex: 1,
             showSymbol: false,
             lineStyle: {
             normal: {
             width: 1
             }
             }
             }*/
        ]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    /*myChart.on("datazoom", function (data) {
        console.log(data);
    });*/

    //var myChart0 = echarts.init(document.getElementById('column'));


    option0 = {
        backgroundColor: '#21202D',
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['价格', '销量']
        },
        xAxis: [
            {
                type: 'category',
                data: JSON.parse('{$x_ray}')
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '销量',
                min: 0,
                max: 600,
                interval: 200,
                axisLabel: {
                    formatter: '{value} 吨'
                }
            }
        ],
        series: [
            {
                name: '销量',
                type: 'bar',
                data: JSON.parse('{$num}'),
                itemStyle: {
                    normal: {color: '#fc6621'},
                    emphasis: {color: 'red'}
                }
            }, false
            /*{
             name: '平均温度',
             type: 'line',
             yAxisIndex: 1,
             data: JSON.parse('{$rand}')
             }*/
        ]
    };


    // 使用刚指定的配置项和数据显示图表。
   // myChart0.setOption(option0);
</script>