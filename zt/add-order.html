<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>订单新增</title>
<link rel="stylesheet" type="text/css" href="style/common.css"/>
</head>

<body>
<!--add-order-wrap begin-->
<div class="add-order-wrap">
	<form name="" method="post" action="">
        <!--add-order begin-->
        <div class="add-order">
            <table border="1">
              <tr>
                <td class="name">订单名称：</td>
                <td><input type="text" class="import"/></td>
                <td class="name">订单编号：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">客户名称：</td>
                <td><input type="text" class="import"/></td>
                <td class="name">签订日期：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">总金额：</td>
                <td><input type="text" class="import"/></td>
                <td class="name">签约地点：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">运输方式及运费：</td>
                <td>
                    <select>
                        <option>需方自提，费用自理</option>
                        <option>供方送到</option>
                    </select>
                </td>
                <td class="name">运费：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">提货日期：</td>
                <td><input type="text" class="import"/></td>
                <td class="name">送货日期：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">提货地点：</td>
                <td><input type="text" class="import"/></td>
                <td class="name">送货地点：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">付款方式：</td>
                <td>
                    <select>
                        <option>银行电汇</option>
                        <option>现金</option>
                        <option>支票</option>
                        <option>转账</option>
                        <option>托收</option>
                    </select>
                </td>
                <td class="name">付款日期：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">业务模式：</td>
                <td>
                    <select>
                        <option>自营</option>
                        <option>撮合</option>
                        <option>联营</option>
                    </select>
                </td>
                <td class="name">货款结算方式：</td>
                <td><input type="text" class="import"/></td>
              </tr>
              <tr>
                <td class="name">备注：</td>
                <td colspan="3"><textarea></textarea></td>
              </tr>
            </table>
        </div>
        <!--add-order end-->
        <!--detail begin-->
        <div class="detail">
            <!--title begin-->
            <div class="title">
                <h3>明细</h3>
                <span class="add">添加</span>
                <span class="close">关闭弹窗</span>
            </div>
            <!--title end-->
            <table>
                <tr>
                    <th>产品名称</th>
                    <th>牌号</th>
                    <th>产地</th>
                    <th>数量</th>
                    <th>单位</th>
                    <th>单价</th>
                    <th>金额</th>
                    <th>总库存</th>
                    <th>绑定库存</th>
                    <th>操作</th>
                </tr>
            </table>
            <!--total begin-->
            <div class="total">
                <span class="total-money">合计金额小写：<input type="text" value="0"/></span>
                <span class="total-amount">合计数量：<input type="text" value="0"/></span>
            </div>
            <!--total end-->
        </div>
        <!--detail end-->
        <div class="btn">
        	<input type="submit" value="提交"/>
            <input type="reset" value="重置"/>
            <input type="button" value="导出"/>
        </div>
    </form>
</div>
<!--add-order-wrap end-->
<input type="hidden" value="LLDPE" name="pro-name" id="pro-name"/>
<input type="hidden" value="AAA" name="grade" id="grade"/>
<input type="hidden" value="BBB" name="place" id="place"/>
<input type="hidden" value="120" name="amount" id="amount"/>
<input type="hidden" value="吨" name="unit" id="unit"/>
<input type="hidden" value="122" name="price" id="price"/>
<input type="hidden" value="122" name="money" id="money"/>
<input type="hidden" value="1235" name="stock" id="stock"/>
<input type="hidden" value="1005" name="bind-stock" id="bind-stock"/>
</body>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script>
$(function(){
	var detailTable = $(".detail table"),
		str = "";
		
	//关闭弹窗
	$(".close").bind("click",function(){
		var proName = $("#pro-name").val(),
			grade = $("#grade").val(),
			place = $("#place").val(),
			amount = $("#amount").val(),
			unitName = $("#unit").val(),
			price = $("#place").val(),
			money = $("#money").val(),
			stock = $("#stock").val(),
			bindStock = $("#bind-stock").val();
			addTr(proName,grade,place,amount,unitName,price,money,stock,bindStock);
			
		//计算总金额与总数量
		var totalMoney = $(".total-money input");
			totalMoney.val(parseInt(totalMoney.val())+parseInt(money));
		var totalAmount = $(".total-amount input");
			totalAmount.val(parseInt(totalAmount.val())+parseInt(amount));
			
			
			
	});
	
	//删除某一条数据
	detailTable.find(".opt span").live("click",function(){ 
		var thisTr = $(this).closest("tr");
		thisTr.remove();
		
		//计算总金额与总数量
		var totalMoney = $(".total-money input");
			totalMoney.val(parseInt(totalMoney.val())-parseInt(thisTr.find(".money").html()));
		var totalAmount = $(".total-amount input");
			totalAmount.val(parseInt(totalAmount.val())-parseInt(thisTr.find(".amount").html()));
		
	});
	
	function addTr(proName,grade,place,amount,unitName,price,money,stock,bindStock){
		str = '<tr>'+
				'<td>'+proName+'</td>'+
				'<td>'+grade+'</td>'+
				'<td>'+place+'</td>'+
				'<td class="amount">'+amount+'</td>'+
				'<td>'+unitName+'</td>'+
				'<td>'+price+'</td>'+
				'<td class="money">'+money+'</td>'+
				'<td>'+stock+'</td>'+
				'<td>'+bindStock+'</td>'+
				'<td class="opt"><span>删除</span></td>'+
			'</tr>';
		detailTable.append(str);
	}
});
</script>
</html>
